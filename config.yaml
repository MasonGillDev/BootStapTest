name: MasonBootTest
type: container
profiles:
  - default

source:
  type: image
  mode: pull
  protocol: simplestreams
  server: https://cloud-images.ubuntu.com/releases
  alias: "24.04"

config:
  user.user-data: |
    #cloud-config
    packages:
      - git
      - python3
      - python3-pip  # so we can pip3 install packages (python3-venv works too)

    runcmd:
      # 1) Clone your Git repo into /root/my-bootstraps
      - [ git, clone, "https://github.com/MasonGillDev/BootStapTest.git", "/root/my-bootstraps" ]

      # 2) Ensure the script is executable (if not already)
      - [ chmod, "+x", "/root/my-bootstraps/bootstrap.sh" ]

      # 3) Run the script and capture logs
      - [ bash, "-c", "/root/my-bootstraps/bootstrap.sh | tee -a /var/log/my-bootstrap.log" ]
